<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<title>Paket Yönetim Sistemi</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 7952 2016-07-26 18:15:59Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

.subscript {
  vertical-align: sub;
  font-size: smaller }

.superscript {
  vertical-align: super;
  font-size: smaller }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

object[type="image/svg+xml"], object[type="application/x-shockwave-flash"] {
  overflow: hidden;
}

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title, .code .error {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left, table.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right, table.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

table.align-center {
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: inherit }

/* div.align-center * { */
/*   text-align: left } */

.align-top    {
  vertical-align: top }

.align-middle {
  vertical-align: middle }

.align-bottom {
  vertical-align: bottom }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block, pre.math, pre.code {
  margin-left: 2em ;
  margin-right: 2em }

pre.code .ln { color: grey; } /* line numbers */
pre.code, code { background-color: #eeeeee }
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

/* "booktabs" style (no vertical lines) */
table.docutils.booktabs {
  border: 0px;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.docutils.booktabs * {
  border: 0px;
}
table.docutils.booktabs th {
  border-bottom: thin solid;
  text-align: left;
}

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="paket-yonetim-sistemi">
<h1 class="title">Paket Yönetim Sistemi</h1>

<p>Bu dokümanda paket yönetim sisteminin yapısı ve nasıl geliştirileceği anlatılmaktadır.
Bu dokümanda örnek olması açısından <strong>python</strong> ve <strong>bash</strong> programlama dilleri kullanılacaktır.
Eğer yeterli programlama yeteneğiniz olduğundan emin değilseniz dokümanı okumaya başlamadan önce programlama becerilerinizi gözden geçirebilirsiniz.</p>
<p>Bu dokümanda yer alan örnekler konuyu kavramanız için basitleştirilmeye çalışılmıştır. Yer alan örneklerde kullanılan yapıların benzerlerini yazarak kendi paket sisteminizi oluşturmanız hedeflenmektedir.</p>
<p>Dokümanda herhangi bir paket sistemi baz alınmamıştır. Tüm örnekler ve bu dokümanın kendisi <strong>GPLv3</strong> lisansı ile lisanslıdır.</p>
<div class="section" id="onsoz">
<h1>Önsöz</h1>
<p>Türkler önsöz okumaz :D</p>
</div>
<div class="section" id="bolum-1-paket-sistemi-tanimi-ve-temel-yapisi">
<h1>Bölüm 1: Paket sistemi tanımı ve temel yapısı</h1>
<div class="section" id="paket-sisteminin-tanimi">
<h2>Paket sisteminin tanımı</h2>
<p>Paket yönetim sistemleri bir dağıtımda bulunan en temel parçadır.
Sistem üzerine paket kurma ve kaldırma güncelleme yapma gibi işlemlerden sorumludur.
Başlıca 2 tip paket sistemi vardır:</p>
<ul class="simple">
<li>Binary (ikili) paket sistemi</li>
<li>Source (kaynak) paket sistemi</li>
</ul>
<p>Bir paket sistemi hem binary hem source paket sistemi özelliklerine sahip olabilir. Bununla birlikte son kullanıcı dağıtımlarında genellikle binary paket sistemleri tercih edilir.</p>
<div class="section" id="binary-paket-sistemi">
<h3>Binary paket sistemi</h3>
<p>Bu tip paket sistemlerinde önceden derlenmiş olan paketler hazır şekilde indirilir ve açılarak sistem ile birleştirilir.
Binary paket sistemlerinde paketler önceden derleme talimatları ile oluşturulmalıdır.</p>
<p>Binary paket sistemine örnek olarak <strong>apt</strong>, <strong>dnf</strong>, <strong>pacman</strong> örnek verilebilir.</p>
</div>
<div class="section" id="source-paket-sistemi">
<h3>Source paket sistemi</h3>
<p>Bu tip paket sistemlerinde derleme talimatları kurulum yapılacak bilgisayar üzerinde kullanılarak paketler kurulum yapılacak bilgisayarda oluşturulur ve kurulur.</p>
<p>Source paket sistemine örnek olarak <strong>portage</strong> örnek verilebilir.</p>
</div>
</div>
<div class="section" id="paket-sisteminin-temel-yapisi">
<h2>Paket sisteminin temel yapısı</h2>
<p>Paket sistemleri 4 ana başlık altında incelenecektir:</p>
<ul class="simple">
<li>Komut satırı ve parametre işleme</li>
<li>Paket kurulumu ve kaldırmaya yarayan işlemler</li>
<li>Depo indexleme ve depo yönetimi</li>
<li>Paket derleme</li>
</ul>
<div class="section" id="komut-satiri">
<h3>Komut satırı</h3>
<p>Komut satırı kullanıcıdan gelen isteği yerine getirmek için kullanılan söz dizisidir.
Paket sisteminde komut olarak <strong>install</strong>, <strong>remove</strong>, <strong>update</strong> bulunur.
Bu komutlar ilk parametredir ve sonrasonda paket isimleri veya ek parametreler bulunur. Örneğin:</p>
<pre class="code shell literal-block">
apt-get install --reinstall gimp
</pre>
<p>Yukarıdaki örnekte install yapılacak eylem --reinstall ek parametre gimp ise paket adıdır.</p>
</div>
<div class="section" id="paket-kurma-ve-kaldirma">
<h3>Paket kurma ve kaldırma</h3>
<p>Paket kurulurken paket içerisinde bulunan dosyalar sisteme kopyalanır.
Daha sonra istenirse silinebilmesi için paket içeriğinde dosyaların listesi tutulur.
Bu dosya ayrıca paketin bütünlüğünü kontrol etmek için de kullanılır.</p>
<p>Örneğin bir paketimiz zip dosyası olsun ve içinde dosya listesini tutan <strong>.LIST</strong> adında bir dosyamız olsun. Paketi aşağıdaki gibi kurabiliriz.</p>
<pre class="code shell literal-block">
<span class="name builtin">cd</span> /onbellek/dizini
unzip /dosya/yolu/paket.zip
cp -rfp ./* /
cp .LIST /paket/veri/yolu/paket.LIST
</pre>
<p>Bu örnekte ilk satırda geçici dizine gittik ve paeti oraya açtık.
Daha sonra paket içeriğini kök dizine kopyaladık.
Daha sonra paket dosya listesini verilerin tutulduğu yere kopyaladık.
Bu işlemden sonra paket kurulmuş oldu.</p>
<p>Paketi kaldırmak için ise aşağıdaki örnek kullanılabilir.</p>
<pre class="code shell literal-block">
cat /paket/veri/yolu/paket.LIST <span class="punctuation">|</span> <span class="keyword">while</span> <span class="name builtin">read</span> dosya <span class="punctuation">;</span> <span class="keyword">do</span>
    <span class="keyword">if</span> <span class="operator">[[</span> -f <span class="literal string double">&quot;</span><span class="name variable">$dosya</span><span class="literal string double">&quot;</span> <span class="operator">]]</span> <span class="punctuation">;</span> <span class="keyword">then</span>
        rm -f <span class="literal string double">&quot;</span><span class="name variable">$dosya</span><span class="literal string double">&quot;</span>
    <span class="keyword">fi</span>
<span class="keyword">done</span>
cat /paket/veri/yolu/paket.LIST <span class="punctuation">|</span> <span class="keyword">while</span> <span class="name builtin">read</span> dizin <span class="punctuation">;</span> <span class="keyword">do</span>
    <span class="keyword">if</span> <span class="operator">[[</span> -d <span class="literal string double">&quot;</span><span class="name variable">$dizin</span><span class="literal string double">&quot;</span> <span class="operator">]]</span> <span class="punctuation">;</span> <span class="keyword">then</span>
        rmdir <span class="literal string double">&quot;</span><span class="name variable">$dizin</span><span class="literal string double">&quot;</span> <span class="operator">||</span> <span class="name builtin">true</span>
    <span class="keyword">fi</span>
<span class="keyword">done</span>
rm -f /paket/veri/yolu/paket.LIST
</pre>
<p>Bu örnekte paket listesini satır satır okuduk. Önce dosya olanları sildik.
Daha sonra tekrar okuyup boş kalan dizinleri sildik.
Son olarak palet listesi dosyamızı sildik.
Bu işlem sonunda paket silinmiş oldu.</p>
</div>
<div class="section" id="depo-indexleme">
<h3>Depo indexleme</h3>
<p>Depo, paket yönetim sistemlerinde kurulacak olan paketleri içeren bir veri topluluğudur.
Kaynak depo ve ikili depo olarak ikiye ayrılır.
Depo içerisinde hiyerarşik olarak paketler yer alır.
Index ise depoda yer alan paketlerin isimleri sürüm numaraları gibi bilgiler ile adreslerini tutan kayıttır.
Paket yönetim sistemi index içerisinden gelen veriye göre gerekli paketi indirir ve kurar. Depo indexi aşağıdaki gibi olabilir:</p>
<pre class="code yaml literal-block">
<span class="name tag">Package</span><span class="punctuation">:</span><span class="whitespace"> </span><span class="literal scalar plain">hello</span><span class="whitespace">
</span><span class="name tag">Version</span><span class="punctuation">:</span><span class="whitespace"> </span><span class="literal scalar plain">1.0</span><span class="whitespace">
</span><span class="name tag">Dependencies</span><span class="punctuation">:</span><span class="whitespace"> </span><span class="literal scalar plain">test, foo, bar</span><span class="whitespace">
</span><span class="name tag">Path</span><span class="punctuation">:</span><span class="whitespace"> </span><span class="literal scalar plain">h/hello/hello_1.0_x86_64.zip</span><span class="whitespace">

</span><span class="name tag">Package</span><span class="punctuation">:</span><span class="whitespace"> </span><span class="literal scalar plain">test</span><span class="whitespace">
</span><span class="name tag">Version</span><span class="punctuation">:</span><span class="whitespace"> </span><span class="literal scalar plain">1.1</span><span class="whitespace">
</span><span class="name tag">Path</span><span class="punctuation">:</span><span class="whitespace"> </span><span class="literal scalar plain">t/test/test_1.1_aarch64.zip</span><span class="whitespace">

</span><span class="name namespace">...</span>
</pre>
<p>Yukarıdaki örnekte paket adı bilgisi sürüm bilgisi ve bağımılılıklar gibi bilgiler ile paketin sunucu içerisindeki konumu yer almaktadır.
Depo indexi paketlerin içinde yer alan paket bilgileri okunarak otomatik olarak oluşturulur.</p>
<p>Örneğin paketlerimiz zip dosyası olsun ve paket bilgisini <strong>.INFO</strong> dosyası taşısın. Aşağıdaki gibi depo indexi alabiliriz.</p>
<pre class="code shell literal-block">
<span class="keyword">function</span> index <span class="operator">{</span>
    &gt; index.txt
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="name variable">$&#64;</span> <span class="punctuation">;</span> <span class="keyword">do</span>
        unzip -p <span class="name variable">$i</span> .INFO &gt;&gt; index.txt
        <span class="name builtin">echo</span> <span class="literal string double">&quot;Path: </span><span class="name variable">$i</span><span class="literal string double">&quot;</span> &gt;&gt; index.txt
    <span class="keyword">done</span>
<span class="operator">}</span>
index t/test/test_1.0_x86_64.zip h/hello/hello_1.1_aarch64.zip ...
</pre>
<p>Bu örnekte paketlerin içindeki paket bilgisi içeren dosyaları uç uca ekledik.
Buna ek olarak paketin nerede olduğunu anlamak içn paket konumunu da ekledik.</p>
</div>
<div class="section" id="paket-derleme">
<h3>Paket derleme</h3>
<p>Paket sistemlerinde ikili paketler oluşturulurken derleme talimatı kullanılır.
Bu talimat paketin nasıl derleneceğini ve nereye hangi dosyanın geleceğini belirler.
Ayrıca paketin kaynak kodunun nerede olduğu gibi bilgileri de içerir.</p>
<pre class="code shell literal-block">
<span class="name variable">name</span><span class="operator">=</span><span class="literal string double">&quot;bash&quot;</span>
<span class="name variable">version</span><span class="operator">=</span><span class="literal string double">&quot;5.0&quot;</span>
<span class="name variable">depends</span><span class="operator">=(</span>ncurses readline<span class="operator">)</span>
<span class="name variable">archive</span><span class="operator">=(</span>
    https://ftp.gnu.org/gnu/bash/bash-5.0.tar.gz
<span class="operator">)</span>

build<span class="operator">(){</span>
    tar -xf bash-5.0.tar.gz
    <span class="name builtin">cd</span> bash-5.0
    ./configure --prefix<span class="operator">=</span>/usr
    make
<span class="operator">}</span>
install<span class="operator">(){</span>
    make install <span class="name variable">DESTDIR</span><span class="operator">=</span>/paketleme/dizini
<span class="operator">}</span>
</pre>
<p>Yukarıdaki örnek derleme talimatında <strong>build</strong> ve <strong>install</strong> adında iki adet fonsiyon kullanarak paketin nasıl derleneceğini belirttik.
<strong>archive</strong> listesi indirilir ve build ve ardından install çalıştırılır.
<strong>DESTDIR</strong> değerini ayarlayarak paketleme dizinine kurulum yaptırdık.
<strong>--perfix=/usr</strong> parametresi ise paketin /usr/local yerine /usr/ içerisine kurulması için kullanıldı.</p>
<p>Paketlerin nasıl derlendiği ile ilgili gerekli bilgiyi kaynak kodun kendisinden veya archlinux gibi diğer dağıtımların depolarından bakabilirsiniz.</p>
<p>Paket sistemi derleme işlemi yaparken root yekisi kullanmamalıdır.
Bunun en önemli sebebi ise paket derlenirken hatalı bir durum oluşursa derleme yapan sisteme müdahale edebilir ve paket bozuk oluşturulabilir.
Bu durumun önüne geçebilmek için <strong>fakeroot</strong> ve <strong>unshare</strong> komutlarından veya aynı işe yarayan yöntemlere başvurmanız gerekmektedir.</p>
</div>
</div>
</div>
<div class="section" id="bolum-2-paket-sisteminin-ic-yapisi">
<h1>Bölüm 2: Paket sisteminin iç yapısı</h1>
<p>Paket yönetim sistemlerinde paket kurma ve kaldırma işlemleri aşağıdaki sıra ile yapılır:</p>
<ul class="simple">
<li>Yerel veritabanından paketlerin durununun sorgulanması</li>
<li>Paket bağımılıklarının çözümlenmesi</li>
<li>Paketlerin kurulabilirliğinin denetlenmesi</li>
<li>Paketlerin indirlmesi</li>
<li>Paketlerin bütünlüğünün kontrol edilmesi</li>
<li>Paketlerin kurulması</li>
<li>Paket kurulum sonrası işlemlerin yapılması</li>
<li>Yerel veritabanının güncellenmesi</li>
</ul>
<div class="section" id="paketlerin-sorgulanmasi">
<h2>Paketlerin sorgulanması</h2>
<p>Paket sistemleri paketler kurulmadan önce paketler kurulu mu değil mi diye kontrolden geçer.
Hangi paketlerin kurulacağıda dair bir liste oluşturulur.
Bu listede yer alan paketler bir sonraki aşamaya geçer.</p>
<pre class="code python literal-block">
<span class="name">need_install</span> <span class="operator">=</span> <span class="punctuation">[]</span>
<span class="keyword">for</span> <span class="name">pkg</span> <span class="operator word">in</span> <span class="name">pkg_list</span><span class="punctuation">:</span>
    <span class="keyword">if</span> <span class="operator word">not</span> <span class="name">pkg</span><span class="operator">.</span><span class="name">is_installed</span><span class="punctuation">():</span>
        <span class="name">need_install</span><span class="operator">.</span><span class="name">append</span><span class="punctuation">(</span><span class="name">pkg</span><span class="operator">.</span><span class="name">name</span><span class="punctuation">)</span>
</pre>
<p>Yukarıdaki örnekte paket kurulu değilse kurulacak paketler listesine eklenir.
Paket kaldırılırken de bu işlemin tam tersi plarak kurulu olmayan paketler es geçilir.</p>
</div>
<div class="section" id="paket-bagimiliklari-cozme">
<h2>Paket bağımılıkları çözme</h2>
<p>Bir paket sisteminin en karmaşık ve en önemli parçası bağımılık çözme kısmıdır.
Bu kısımda paketler ihtiyaç duyulan bağımlılıkları ile beraber kurulacağı için hangi paketlerin gerekli olduğuna karar veren kısım burasıdır.
Çalışma prensibi olarak sürekli kendini tekrarlayan bir fonksiyon bulunur ve bu fonksiyon tamamı hesaplanana kadar içi içe çalışmaya devam eder.</p>
<p>Bir pakete ihtiyaç duyan tüm paketlere ters bağımlılık adı verilir. Bu yapıyı ağacın köklerine ve dallarına benzetebiliriz. Bir dala ulaşmak için geçmemiz gereken dallar bağımlılıkları bir dalı kestiğimizde etkilenen dallar işe ters bağımlılıkları ifade eder.</p>
<pre class="code python literal-block">
<span class="name">need_install</span> <span class="operator">=</span> <span class="punctuation">[]</span>
<span class="keyword">def</span> <span class="name function">resolve</span><span class="punctuation">(</span><span class="name">package</span><span class="punctuation">):</span>
    <span class="keyword">for</span> <span class="name">pkg</span> <span class="operator word">in</span> <span class="name">package</span><span class="operator">.</span><span class="name">dependencies</span><span class="punctuation">:</span>
        <span class="keyword">if</span> <span class="name">pkg</span> <span class="operator word">not</span> <span class="operator word">in</span> <span class="name">need_install</span><span class="punctuation">:</span>
            <span class="name">resolve</span><span class="punctuation">(</span><span class="name">pkg</span><span class="punctuation">)</span>
    <span class="keyword">if</span> <span class="operator word">not</span> <span class="name">package</span><span class="operator">.</span><span class="name">is_installed</span><span class="punctuation">():</span>
        <span class="name">need_install</span><span class="operator">.</span><span class="name">append</span><span class="punctuation">(</span><span class="name">package</span><span class="punctuation">)</span>
<span class="name">resolve</span><span class="punctuation">(</span><span class="name">xxxx</span><span class="punctuation">)</span>
</pre>
<p>Yukarıdaki örnekte bağımlılık ağacı bulma gösterilmiştir. Burada <strong>resolve</strong> fonksiyonu kendi kendisini iç içe çağırır.
Paketlerin bağımlılıkları ve onun alt bağımlılıkları bu fonksiyona sokulur. Kurulu olmayanlar kurulacak paket listesine eklenir.
Burada bazı durumlarda bu döngüsel işlem kısır döngüye girip sonsuz kere tekrar edebilir ve işlem bitmez.
Bu duruma <strong>cycle dependency</strong> adı verilir. Genellikle kötü paketlenmiş paketlerden kaynaklanır. Kaynak tabanlı paket sistemlerinde bu durum çözülemezken ikili paket sistemlerinde derleme yapılmayacağı için aşağıdaki gibi bir çözüm bulunabilir.</p>
<pre class="code python literal-block">
<span class="operator">...</span>
<span class="keyword">if</span> <span class="name">package</span> <span class="operator word">in</span> <span class="name">cache_list</span><span class="punctuation">:</span>
    <span class="keyword">if</span> <span class="name">package</span> <span class="operator word">not</span> <span class="operator word">in</span> <span class="name">cycle_list</span><span class="punctuation">:</span>
        <span class="name">cycle_list</span><span class="operator">.</span><span class="name">append</span><span class="punctuation">(</span><span class="name">package</span><span class="punctuation">)</span>
    <span class="keyword">return</span>
<span class="name">cache_list</span><span class="operator">.</span><span class="name">append</span><span class="punctuation">(</span><span class="name">package</span><span class="punctuation">)</span>
<span class="operator">...</span>
</pre>
<p>Yukarıdaki örnekte her paket sadece bir kez resove fonksiyonundan geçer.
Bu sayede cycle dependency sorunu aşılmış olur. Kaynak tabanlı paket sistemlerinde bu çözüm işe yaramayabilir.
Bunun sebebi ise paketler derlenirken kullanılacak derleme bağımlılığı sırası hatalı hesaplanabilir.
Bu sebeple paketçilerin cycle dependency sorununa sebep olmaması gereklidir.</p>
<p>Yukarıdaki örnekte eğer cycle dependency sorunu oluştuysa cycle_list listesinde bunların listesi tutulur.
Kaynak tabanlı paket listesinde bu listede bir eleman varsa derleme yapılamayacağı için hata verip çıkması sağlanmalıdır.</p>
<p>Bazı durumlarda bir paket kurulu iken başma bir paketin kurulamaması gerekmektedir.
Bu gibi durumlara <strong>confilct</strong> adı verilir. Conflict varsa kurulu olan paket silinir ve yerine istenen paket kurulur.
Veya bu işlemi kullanıcının elle yapması istenir ve hata mesajı verilerek kapanır.</p>
<pre class="code python literal-block">
<span class="operator">...</span>
<span class="keyword">for</span> <span class="name">pkg</span> <span class="operator word">in</span> <span class="name">package</span><span class="operator">.</span><span class="name">conflicts</span><span class="punctuation">:</span>
    <span class="keyword">if</span> <span class="name">pkg</span><span class="operator">.</span><span class="name">is_installed</span><span class="punctuation">():</span>
        <span class="name">error_message</span><span class="punctuation">(</span><span class="literal string double">&quot;Conflict detected! Please remove </span><span class="literal string interpol">%s</span><span class="literal string double">&quot;</span> <span class="operator">%</span> <span class="name">pkg</span><span class="operator">.</span><span class="name">name</span><span class="punctuation">)</span>
    <span class="keyword">elif</span> <span class="name">pkg</span> <span class="operator word">in</span> <span class="name">need_install</span><span class="punctuation">:</span>
        <span class="name">error_message</span><span class="punctuation">(</span><span class="literal string double">&quot;Conflict detected! Cannot resolve </span><span class="literal string interpol">%s</span><span class="literal string double">&quot;</span> <span class="operator">%</span> <span class="name">pkg</span><span class="operator">.</span><span class="name">name</span><span class="punctuation">)</span>
<span class="operator">...</span>
</pre>
<p>Yukarıdaki örnekte paketin çakışmaları mevcutsa kurulum reddediliyor. Ayrıca paket bağımlılığı listesinde birbiri ile çakışan paketler mevcutsa da kurulum reddedilmelidir.</p>
</div>
</div>
</div>
</body>
</html>
